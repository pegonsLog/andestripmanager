#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Executando verificaÃ§Ãµes prÃ©-push..."

# Verificar se estÃ¡ na branch correta para deploy
CURRENT_BRANCH=$(git branch --show-current)

if [ "$CURRENT_BRANCH" = "main" ]; then
    echo "âš ï¸ Push para branch main - executando verificaÃ§Ãµes completas..."
    
    # Executar testes E2E
    echo "ğŸ§ª Executando testes E2E..."
    npm run e2e:ci
    
    echo "âœ… VerificaÃ§Ãµes para produÃ§Ã£o concluÃ­das!"
elif [ "$CURRENT_BRANCH" = "develop" ]; then
    echo "ğŸ”§ Push para branch develop - executando verificaÃ§Ãµes de staging..."
    
    # Executar build de staging
    echo "ğŸ”¨ Testando build de staging..."
    npm run build:staging
    
    echo "âœ… VerificaÃ§Ãµes para staging concluÃ­das!"
fi

echo "âœ… VerificaÃ§Ãµes prÃ©-push concluÃ­das!"